<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../polymer/lib/utils/mixin.html">
<link rel="import" href="date-picker.html">
<link rel="import" href="time-picker.html">

<script>
  /**
   * Mixin for datetime-picker
   *
   * @mixinFunction
   * @polymer
   *
   * @appliesMixin DatePickerPattern
   * @appliesMixin TimePickerPattern
   *
   * @param {Object} superClass class to extend
   * @return {Object} extended class
   */
  const DatetimePickerPattern = function(superClass) { // eslint-disable-line no-unused-vars

    return class extends superClass { // eslint-disable-line no-unused-vars, no-undef

      static get expectedNativeInputType() {
        return 'datetime-local';
      }

      static get pickerTemplate() {
        return `
          <div id="picker" class="dropdown" horizontal$="[[_ifClamped(clamp, 'day')]]">
            ${this.calendarTemplate}
            ${this.timeTemplate}
            <div id="buttons">
              ${this.buttonTemplate}
            </div>
          </div>
        `;
      }

      static get properties() {
        return {
          /**
           * Clamp datetime to a property
           * possible values: 'month', 'day', 'hour', 'minute', 'second', 'millisecond' or ''
           */
          clamp: {
            type: String,
            value: 'millisecond',
            notify: true
          }
        }
      }
    }
  }
  window.DatetimePickerPattern = Polymer.dedupingMixin(DatetimePickerPattern);
</script>

<dom-module id="datetime-picker">
  <script>
    /**
     *  `<datetime-picker>` is a picker for date and time for **[Polymer](https://github.com/Polymer/polymer)** that can use the **native** input, too. If the **native** picker is choosen and is not supported, this element uses the **polyfill** datetime-picker. The `<calendar-element>` and the `<time-element>` will come in place if the native picker is not available or is not explicitly wanted. A range picker is provided by combining the `min`- and `max`-attributes.
     *
     *  ```html
     *    <datetime-picker value="{{value}}"></datetime-picker>
     *  ```
     *
     *  A use case could be for example, if you want on mobile devices use the `native picker` and on desktop devices this polyfill.
     *
     *  ```html
     *    <datetime-picker native-on-mobile></datetime-picker>
     *  ```
     *
     *  If you need an **overlay** then use `overlay-datetime-picker`, that creates the element in an `overlay-element`, that extends *IronOverlayBehavior* and will create some of its attribute-bindings.
     *
     * Custom property | Description | Default
     * ----------------|-------------|----------
     * `--calendar-element`                   | Mixin applied to the calendar                  | {}
     * `--calendar-cell`                      | Mixin applied to the date cells                | {}
     * `--calendar-cell-hovered-background`   | background of the hovered date cells           | transparent
     * `--calendar-cell-hovered-border-color` | border-color of the hovered date cells         | currentColor
     * `--calendar-cell-size`                 | width of a date cell                           | 3em
     * `--calendar-cell-border-radius`        | border-radius of a date cell                   | 0.3em
     * `--calendar-cell-font-size`            | font-size of a date cell                       | 0.75em
     * `--calendar-cell-notinmonth-opacity`   | text opacity of a date cell that are not in the current month | 0.6
     * `--calendar-cell-weekend-opacity`      | text opacity of a date cell that are on weekend | 1
     * `--time-element`                       | Mixin applied to the time-element               | {}
     *
     *  Have a look at [input-picker-pattern#input-picker-shared-style](https://github.com/fooloomanzoo/input-picker-pattern#input-picker-shared-style) and [input-picker-pattern#input-shared-style](https://github.com/fooloomanzoo/input-picker-pattern#input-shared-style) to see how to style the element. `--inner-input-focus-background` and `--inner-input-focus-color` will style the selected date-cell and inputs.
     *
     *  @customElement
     *  @polymer
     *
     *  @appliesMixin DatetimePickerPattern
     *
     *  @demo demo/index.html
     *  @demo demo/datetime-elements.html datetime elements
     *  @demo demo/form.html in a form
     *  @demo demo/music-album.html music album demo
     **/
    class DatetimePicker extends DatePickerPattern(TimePickerPattern(DatetimePickerMixin(CalendarElementPattern(TimeElementPattern(SwitchMixin(DateInputPattern(TimeInputPattern(DatetimeInputMixin(DatetimeFormMixin(InputPickerPattern(DatetimeMixin(Polymer.Element)))))))))))) { // eslint-disable-line no-undef

      static get is() {
        return 'datetime-picker';
      }

      static get styleToInclude() {
        return `${super.styleToInclude || ''}dropdown-style`;
      }

      get _hasNative() {
        return DatetimePicker._hasNative;
      }
    }

    window.customElements.define(DatetimePicker.is, DatetimePicker);
  </script>
</dom-module>
